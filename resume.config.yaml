# Resume Generation Configuration
#
# This file centralizes all configuration for the resume generation pipeline.
# Settings can be overridden per environment (development, production, ci).

# ============================================================================
# DEFAULT CONFIGURATION
# These settings apply to all environments unless overridden below
# ============================================================================

# File paths and directories
paths:
  # Source resume YAML file (single source of truth)
  source: "resume.yaml"

  # Temporary YAML file created for rendercv (will be cleaned up)
  tempYaml: "resume_temp.yaml"

  # Directory where rendercv outputs files
  rendercvOutputDir: "rendercv_output"

  # Base output directory for website files
  outputDir: "client/public"

  # Subdirectory for JSON data
  dataDir: "client/public/data"

  # Output file names
  outputs:
    pdf: "resume.pdf"
    markdown: "resume.md"
    json: "resume.json"

# Website URLs
urls:
  # Base URL for the website (overridden per environment)
  base: "http://localhost:5173"

  # Paths to resume files (relative to base URL)
  resumePdf: "/resume.pdf"
  resumeMd: "/resume.md"

# Data field mappings
fields:
  # Project sections to process and filter
  projectSections:
    - "professional_projects"
    - "personal_projects"

  # Field name used to filter projects for resume
  filterField: "show_on_resume"

  # Field name for resume URL in the CV data
  resumeUrlField: "resume_url"

  # CV root fields to exclude from resume PDF (but keep in website JSON)
  # Example: ["phone", "location", "email"] to hide contact info from PDF
  excludeCvFields:
    # - "phone"
    - "location"

  # Fields to remove from resume YAML (not needed by rendercv)
  removeFromResume:
    - "resume_url"
    - "show_on_resume"

# Build configuration
build:
  # What to generate
  generatePdf: true
  generateMarkdown: true
  generateJson: true

  # JSON formatting options
  jsonIndent: 2  # Number of spaces for indentation (or null for compact)
  jsonSortKeys: false  # Whether to sort object keys alphabetically

  # Cleanup options
  cleanupTemp: true
  cleanupRendercvOutput: false  # Keep rendercv_output for debugging

  # Output options
  verbose: true  # Show detailed logging

# RenderCV configuration
rendercv:
  # Output file pattern template (computed from cv.name)
  # Template syntax: {{cv.name}} will be replaced with slugified name
  outputPattern: "{{cv.name}}_CV"

  # File extensions generated by rendercv
  extensions:
    pdf: ".pdf"
    markdown: ".md"
    html: ".html"
    typst: ".typ"

  # Additional rendercv CLI options (if needed)
  options: []
  # Example: ["--use-local-latex-command", "xelatex"]

# Text transformation rules
transforms:
  # Convert markdown bold to HTML bold in JSON
  markdownToHtml:
    enabled: true
    rules:
      - pattern: '\*\*(.*?)\*\*'
        replacement: '<b>$1</b>'

# ============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# Settings here override defaults based on NODE_ENV or RESUME_ENV
# ============================================================================

environments:
  # Development environment (local)
  development:
    urls:
      base: "http://localhost:5173"

    build:
      verbose: true
      cleanupRendercvOutput: false  # Keep for debugging

  # Production environment (deployed site)
  production:
    urls:
      # Base URL is auto-detected from your GitHub repository
      # No need to change this - it will be automatically set to:
      # https://YOUR-USERNAME.github.io
      base: "https://example.github.io"  # Placeholder, will be auto-detected

    build:
      verbose: false
      cleanupRendercvOutput: true  # Clean up in production

  # CI/CD environment (GitHub Actions)
  ci:
    urls:
      # Base URL is auto-detected from GitHub Actions environment
      # Automatically uses your repository owner name
      base: "https://example.github.io"  # Placeholder, will be auto-detected

    build:
      verbose: true  # Show detailed logs in CI
      cleanupRendercvOutput: true  # Clean up after build

# ============================================================================
# NOTES
# ============================================================================
#
# To use environment-specific settings:
#   - Set NODE_ENV or RESUME_ENV environment variable
#   - Example: NODE_ENV=production npm run generate-resume
#   - Example: RESUME_ENV=ci npm run generate-resume
#
# Adding new configurable values:
#   1. Add the value to the default config above
#   2. Update scripts/config-loader.js if needed (it auto-merges)
#   3. Use in scripts/generate-resume.js via config object
#   4. Optionally add environment-specific overrides
#
# ============================================================================
